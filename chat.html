async function refreshCryptoPrice(cryptoId) {
    try {
        // Ambil harga crypto terbaru
        const prices = await getCryptoPrice(cryptoId);
        const formattedPrices = prices.map(price => `$${price[1].toFixed(2)}`).join(" ");
        // Ambil chat history dari localStorage
        let cleanChatHistory = JSON.parse(localStorage.getItem("cleanChatHistory")) || [];

        // Cari indeks pesan harga lama
        const priceIndex = cleanChatHistory.findIndex(msg => msg.type === 'price');

        cleanChatHistory.splice(1, 1);
        localStorage.setItem("cleanChatHistory", JSON.stringify(cleanChatHistory));
        console.log("âœ… Elemen ke-1 di cleanChatHistory berhasil dihapus!");
        
        // Tambahkan pesan harga baru
        const systemPriceMessage = {
            role: 'system',
            type: 'price',
            content: `Selected crypto: ${cryptoId}, Coingecko_R1 real-time updated price data from 30 days ago to today: ${formattedPrices}.`
        };

        // Masukkan di indeks 1
        cleanChatHistory.splice(1, 0, systemPriceMessage); // Masukkan setelah system utama
        
         // ðŸš€ **Simpan kembali ke localStorage**
        localStorage.setItem("cleanChatHistory", JSON.stringify(cleanChatHistory));

        return systemPriceMessage; // (Opsional)
    } catch (error) {
        console.error("Error refreshing crypto price:", error);
    }
}
