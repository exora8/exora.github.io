async function refreshCryptoPrice(cryptoId) {
    try {
        // Ambil harga crypto terbaru
        const prices = await getCryptoPrice(cryptoId);
        const formattedPrices = prices.map(price => `$${price[1].toFixed(2)}`).join(" ");

        // Ambil chat history dari localStorage
        let cleanChatHistory = JSON.parse(localStorage.getItem("cleanChatHistory")) || [];

        // Hapus pesan harga lama
        cleanChatHistory = cleanChatHistory.filter(msg => msg.type !== 'price');

        // Tambahkan pesan harga baru
        const systemPriceMessage = {
            role: 'system',
            type: 'price',
            content: `Selected crypto: ${cryptoId}, Coingecko_R1 real-time updated price data from 30 days ago to today: ${formattedPrices}.`
        };

        // Masukkan di indeks 1 setelah pesan sistem utama
        cleanChatHistory.splice(1, 0, systemPriceMessage);

        // ðŸš€ **Simpan kembali ke localStorage TANPA menghapus history lama**
        localStorage.setItem("cleanChatHistory", JSON.stringify(cleanChatHistory));

        console.log("âœ… Harga crypto berhasil di-refresh!");
    } catch (error) {
        console.error("Error refreshing crypto price:", error);
    }
}
