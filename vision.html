<!DOCTYPE html>
<html>
<head>
    <title>Exora Vision</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: #1e1e2e;
            color: #cdd6f4;
            font-family: 'Arial', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        .container {
            text-align: center;
            position: relative;
            z-index: 1;
        }
        h2 {
            color: #89b4fa;
            margin-bottom: 20px;
        }
        input, button {
            background-color: #313244;
            color: #cdd6f4;
            border: none;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            width: 200px;
            transition: transform 0.2s ease;
        }
        
        button, .file-btn {
            background-color: #313244;
            color: #cdd6f4;
            border: none;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            width: 200px;
            transition: transform 0.2s ease;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            line-height: 1.5;
            font-size: 16px;
        }
        button:hover, .file-btn:hover {
            background-color: #89b4fa;
            transform: scale(1.05);
        }
        #imagePreview {
    display: none;
    margin-top: 10px;
    max-width: 90%;
    height: 90%;
    border-radius: 10px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5); /* Mulai kecil */
    opacity: 0; /* Mulai transparan */
    z-index: 2;
    animation: popup 0.8s ease-out forwards; /* Animasi aktif langsung */
}

/* Setelah gambar loaded */
#imagePreview.show {
    display: block; 
    opacity: 1;
}

/* Animasi scale smooth */
@keyframes popup {
    0% {
      
        transform: translate(-50%, 350%) scale(0.5);
        opacity: 0;
    }

    90% {
        transform: translate(-50%, -48%) scale(0.99);
        
        opacity: 1;
    }
    
    100% {
        transform: translate(-50%, -50%) scale(1);
        
        opacity: 1;
    }
}

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 3;
            pointer-events: none;
        }
        #imageInput {
            display: none;
        }
        #response {
            white-space: pre-wrap;
            background-color: #181825;
            padding: 10px;
            border-radius: 5px;
            height: 100%;
            width: 100%;
            overflow: auto;
            word-wrap: break-word;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 4;
            display: none;
            opacity: 0;
            animation: typing 1s ease 0s 1 normal forwards;
        }
        @keyframes typing {
	0% {
		opacity: 0;
		transform: translate(-50%, 150%);
	}

	100% {
		opacity: 1;
		transform: translate(-50%, -50%);
	}
}
        @media (max-width: 600px) {
            .file-btn, input, button {
                width: 80%;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
      <label for="imageInput" class="file-btn">Choose File</label>
        <input type="file" id="imageInput" accept="image/*">
        <button id="takePicture" onclick="openCamera()">Take Picture</button>
    </div>

    <img id="imagePreview" />
    <canvas id="particleCanvas"></canvas>
    <pre id="response"></pre>

    <script>
      
      document.body.addEventListener("paste", (e) => {
    const items = e.clipboardData?.items;
    if (items) {
        for (let item of items) {
            if (item.type.startsWith("image/")) {
                const blob = item.getAsFile();
                const reader = new FileReader();
                reader.onload = (event) => {
                    document.getElementById("imagePreview").src = event.target.result;
                    uploadImage(blob);  // Pake fungsi upload yang udah ada
                };
                reader.readAsDataURL(blob);
            }
        }
    }
});


        function openCamera() {
            const input = document.getElementById('imageInput');
            input.setAttribute('capture', 'environment');
            input.click();
        }

document.getElementById('imageInput').addEventListener('change', () => {
    const file = document.getElementById('imageInput').files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            const img = document.getElementById('imagePreview');
            img.src = e.target.result;
            img.style.display = 'block';
            img.onload = () => {
                img.classList.add('show');

                // Tunggu animasi selesai dulu baru setup canvas
                setTimeout(() => setupCanvas(img), 800);
            };
        };
        reader.readAsDataURL(file);
    }
});

function setupCanvas(image) {
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');

    // Ambil ukuran image setelah animasi selesai
    const rect = image.getBoundingClientRect();
    canvas.width = rect.width;
    canvas.height = rect.height;
    canvas.style.position = 'absolute';
    canvas.style.top = `${rect.top + window.scrollY}px`;
    canvas.style.left = `${rect.left + window.scrollX}px`;
    canvas.style.display = 'block';

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

    startScanningLight(canvas, ctx);
}

function startScanningLight(canvas, ctx) {
    let scanY = canvas.height * -5;
    const scanSpeed = canvas.height * 0.05;

    function drawScanningLight() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Cahaya kotak dengan bloom hanya di area gambar
        const lightWidth = canvas.width * 1.2;
        const lightHeight = canvas.height * 2;
        const gradient = ctx.createLinearGradient(0, scanY, 0, scanY + lightHeight);
        gradient.addColorStop(0, 'rgba(255, 255, 255, 0)');
        gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.05)');
        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

        ctx.fillStyle = gradient;
        ctx.fillRect((canvas.width - lightWidth) / 2, scanY, lightWidth, lightHeight);

        scanY += scanSpeed;
        if (scanY > canvas.height) scanY = canvas.height * -2;

        requestAnimationFrame(drawScanningLight);
    }

    drawScanningLight();
}






         const IMG_API_KEY = [
    "bedc482173ef5ae2ee3d11aff6c751ad",
    "e289a41a680b3b8e42d47c618ef1a799",
    "983f47767cae39ddfb0031228296bcda",
    "02e4e79b8f4f7ef185b2d2492f1b4096",
    "f7d50fbf59995e894c0d3ece42161f65",
    "a7a1d267d1b26b88fd43562c0c1ca3ea",
    "57858a3e433bf19132f376e4b25438af"
];
         
         
         
         
         
         
        const TOGETHER_API_URL = "https://api.together.xyz/v1/chat/completions";
        const API_KEYS = [
    "15b70f2d5532d4056cb40a96dada4f41cd6be5206b3265abaa2bc8c1ce85de1b",
    "1986fcb80017badcac2c5761e9bc5d9b5b635a57b58573c094c5aaee0f7cad65",
    "47aacfae02634de54a494b4071c9fb357122f453c3ed25a848e77a32a39c50c2",
    "11eb49ac44759de26e65730a309d05a82e37a77d3547d94f154bd7a3a66de34d",
    "cf887a3d000a64a1686d2bb8e392a64b7f46fe131aff4685e5199510106b8608",
    "9fa71bf023b928a32cad2959fcf5fee36bb9fbb3732ed6ba659892c079da57e0",
    "401925c1ac6e2e33847169014115e9344dcaf32d1c1fe386c8fc92768d7b15ad",
    "215c434d7361a2799557f151ab3b3b80c710a09111339e712a82579f8790f7f2",
    "34211673816c9ef4729e0259c042ebe3d762fb90ff16c36b42ddfb1c0f9e10e6",
    "1ea461952d729c0e3dccadd919ee5d121a8125bc7bd5924192495528e24e2afb",
    "40f561d9befc36d117412f9003d81a2306790e536cec5c36ce540833885f6bd5",
    "f8eb6808a6c585445cd0db8cb5d048b9cb2d35262fe67f9b512ebc17eb4937b2",
    "f19df6a1c0a9dccb696764e091d8990734acdff7b39f811a873f7ddf580f92ff"
];

        function getRandomApiKey() {
            return API_KEYS[Math.floor(Math.random() * API_KEYS.length)];
        }
        
        function getRandomApiKey1() {
            return IMG_API_KEY[Math.floor(Math.random() * IMG_API_KEY.length)];
        }
        
       function getUniqueRandomKey(keysArray, storageKey) {
    if (!keysArray.length) {
        console.error("âš ï¸ Error: Array API key kosong!");
        return null;
    }

    let newKey;
    let attempts = 0;
    const maxAttempts = 10;

    // Ambil last key dari localStorage
    const lastKey = localStorage.getItem(storageKey);

    do {
        newKey = keysArray[Math.floor(Math.random() * keysArray.length)];
        attempts++;
        console.log(`ðŸ” Attempt ${attempts}: ${newKey}`);
        
        if (attempts >= maxAttempts) {
            console.warn("âš ï¸ Warning: Maksimum percobaan tercapai, tetap pakai key terakhir.");
            break;
        }

    } while (newKey === lastKey);

    console.log(`âœ… API key terpilih: ${newKey}`);
    
    // Simpan key baru ke localStorage
    localStorage.setItem(storageKey, newKey);

    return newKey;
}

// Contoh pemakaian
const apiKey = getUniqueRandomKey(API_KEYS, "lastApiKey");
const imgApiKey = getUniqueRandomKey(IMG_API_KEY, "lastImgApiKey");



        function openCamera() {
            const input = document.getElementById('imageInput');
            input.setAttribute('capture', 'environment');
            input.click();
        }

        document.getElementById('imageInput').addEventListener('change', () => {
            const file = document.getElementById('imageInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.getElementById('imagePreview');
                    img.src = e.target.result;
                    img.style.display = 'block';
                    uploadImage(file);
                };
                reader.readAsDataURL(file);
            }
        });

        async function uploadImage(fileInput) {
            const responseField = document.getElementById("response");
            try {
               const selectedImgApiKey = getRandomApiKey1();
               console.log("selected imgbb api key : ", selectedImgApiKey);
                const formData = new FormData();
                formData.append("image", fileInput);

                const imgbbResponse = await fetch(`https://api.imgbb.com/1/upload?key=${selectedImgApiKey}`, {
                    method: "POST",
                    body: formData
                });

                const imgbbData = await imgbbResponse.json();
                const imageUrl = imgbbData.data.url;
                const selectedApiKey = getRandomApiKey();
                

                const payload = {
                    model: "meta-llama/Llama-Vision-Free",
                    messages: [
                        { role: "system", content: "Kamu adalah AI Analis Chart Profesional yang TERKUNCI (LOCKED IN) hanya bisa membaca dan menganalisis DATA YANG TERSEDIA DI GAMBAR YANG DIKIRIM PENGGUNA. Kamu TIDAK BOLEH MENGGUNAKAN DATA DARI LUAR GAMBAR dan TIDAK BOLEH MENGARANG. Jika informasi di gambar kurang jelas, kamu harus menjawab 'DATA TIDAK CUKUP UNTUK ANALISA'. Kamu harus menyampaikan analisis dengan RINGKAS, TEGAS, DAN MUDAH DIMENGERTI, tanpa paragraf panjang atau penjelasan bertele-tele." },
		                    { role: "system", content: "Cara membaca chart dengan optimal: Identifikasi tren utama: Jika harga membentuk Lower Low (LL) dan Lower High (LH) berarti Tren Bearish. Jika harga membentuk Higher High (HH) dan Higher Low (HL) berarti Tren Bullish. Konfirmasi dengan RSI (Relative Strength Index): RSI di bawah 30 berarti Oversold (potensi reversal naik). RSI di atas 70 berarti Overbought (potensi koreksi turun). Jangan hanya mengandalkan RSI, pastikan konfirmasi dari indikator lain. Analisa Volume: Volume naik bersamaan dengan harga naik berarti Buyer dominan, tren kuat naik. Volume naik tapi harga turun berarti Seller dominan, potensi tren turun. Cek Open Interest (OI): OI naik berarti posisi baru masuk, market aktif, tren berlanjut. OI turun berarti banyak posisi ditutup, potensi pelemahan tren. Perhatikan Cumulative Volume Delta (CVD): CVD negatif besar berarti Seller mendominasi. CVD positif besar berarti Buyer lebih kuat mendominasi. Mendeteksi Potensi Drawdown, Retest, atau Reversal: Tanda Drawdown/Koreksi: RSI di atas 70 dan volume melemah meski harga naik menandakan market mulai kelelahan. CVD menurun saat harga naik artinya buyer berkurang, seller mulai masuk. Tanda Reversal Bullish: RSI di bawah 30, volume naik tajam, dan CVD positif besar artinya buyer kuat, peluang reversal naik. OI turun drastis saat harga naik bisa jadi kemungkinan Short Squeeze dan harga lanjut naik cepat. Hindari Fakeout dan Liquidity Grab Reversal: Untuk menghindari fakeout (breakout palsu), perhatikan volume dan CVD saat harga menembus support atau resistance. Kalau harga breakout tapi volume rendah dan CVD lemah atau berlawanan, kemungkinan besar itu fakeout. Perhatikan juga candlestick berikutnya, kalau harga balik masuk ke range lama dengan volume naik, itu tanda fakeout. Untuk mendeteksi liquidity grab reversal (jebakan likuiditas), perhatikan ketika harga menembus support/resistance lalu cepat berbalik arah dengan volume besar dan CVD berlawanan arah, itu tanda besar adanya stop hunt. Konfirmasi dengan OI, kalau OI turun drastis setelah breakout singkat, berarti banyak posisi likuidasi terjadi dan harga bisa berbalik arah. Kombinasikan Semua Indikator: Gabungkan tren harga, RSI, volume, OI, dan CVD untuk konfirmasi sinyal. Jangan bergantung pada satu indikator saja agar analisa lebih akurat dan menghindari sinyal palsu. Tujuan Akhir: AI harus mampu mengenali tren lebih cepat, mendeteksi pola drawdown, fakeout, retest, support, dan resistance secara otomatis, menentukan titik Stop Loss (SL) dan Take Profit (TP) berdasarkan konfirmasi indikator, serta memprediksi potensi reversal atau kelanjutan tren dengan lebih akurat. Dengan pemahaman ini, AI akan lebih cerdas dalam membaca price action dan menghindari jebakan pasar." },
		                    { role: "system", content: "CVD Cumulative Volume Delta Candles adalah versi visual dari indikator CVD yang menampilkan perbedaan antara volume beli (buy market orders) dan volume jual (sell market orders) dalam bentuk candle, bukan garis. Setiap CVD candle mewakili satu periode waktu (misalnya 1 menit, 5 menit, atau 1 jam) dan memperlihatkan apakah di periode itu pembeli atau penjual lebih dominan. Jika volume beli lebih besar daripada volume jual di candle tersebut, CVD candle akan berwarna hijau, menandakan tekanan beli lebih kuat. Sebaliknya, kalau volume jual lebih besar daripada volume beli, CVD candle akan berwarna merah, menandakan tekanan jual yang lebih dominan. Panjang candle CVD juga penting untuk diperhatikan. CVD candle yang panjang menandakan selisih besar antara volume beli dan volume jual, artinya ada agresivitas besar dari satu sisi (entah buyer atau seller). Candle hijau panjang menunjukkan buyer sangat dominan, sedangkan candle merah panjang menunjukkan seller yang mendominasi dengan agresif. Kalau CVD candle kecil atau pendek, itu artinya kekuatan buyer dan seller hampir seimbang, atau market cenderung pasif di periode tersebut. CVD candle sangat berguna untuk membaca kekuatan tren. Kalau harga terus naik dan CVD candle juga konsisten hijau serta makin panjang, artinya tren bullish didorong oleh buyer yang beneran masuk market dengan agresif â€” tren ini cenderung lebih valid dan berlanjut. Sebaliknya, kalau harga naik tapi CVD candle mulai memendek atau malah merah, ini bisa jadi tanda hidden distribution, di mana smart money atau big player diam-diam mulai distribusi jual meskipun harga masih naik â€” potensi reversal ke bawah jadi lebih besar. Sebaliknya di tren turun, kalau harga terus turun dan CVD candle konsisten merah panjang, berarti seller agresif beneran mendorong harga turun â€” ini tanda downtrend yang kuat. Tapi kalau harga turun, tapi CVD candle justru hijau, apalagi makin panjang, ada kemungkinan smart money diam-diam akumulasi barang di harga bawah (hidden accumulation). Ini bisa jadi sinyal bullish reversal. CVD candle juga efektif buat konfirmasi breakout. Kalau harga breakout dari resistance dan diikuti CVD candle hijau panjang, artinya breakout didorong buyer agresif â€” ini pertanda breakout valid dan kemungkinan harga lanjut naik. Tapi kalau breakout terjadi, tapi CVD candle pendek atau malah merah, bisa jadi breakout tersebut fakeout â€” market maker cuma jebak buyer ritel biar masuk, lalu harga balik turun. Selain konfirmasi tren dan breakout, CVD candle juga berguna buat deteksi divergence. Kalau harga higher high tapi CVD candle makin kecil atau malah merah, ini tanda bearish divergence â€” harga naik tapi buyer sebenarnya melemah, potensi harga berbalik turun. Kalau harga lower low tapi CVD candle hijau makin panjang, ini tanda bullish divergence â€” harga turun tapi buyer mulai masuk agresif, ada potensi reversal naik. CVD candle bisa lebih powerful lagi kalau dikombinasikan sama indikator lain kayak RSI, Open Interest, atau Volume Delta Cluster. Misalnya, kalau RSI oversold dan CVD candle hijau makin panjang di harga lower low, itu konfirmasi kuat buat bullish reversal. Atau kalau Open Interest naik bareng CVD candle hijau panjang pas breakout, artinya buyer bukan cuma dorong harga tapi juga nambah posisi baru â€” ini tanda breakout makin kuat. CVD candle sangat cocok buat ngikutin jejak smart money, karena kita bisa lihat kapan mereka mulai akumulasi atau distribusi diam-diam. Ini ngebantu banget biar kita nggak terjebak sama fake breakout atau sinyal palsu." },
		                    { role: "system", content: "Aggregated Open Interest Candles adalah cara visual untuk melihat perubahan open interest di market dalam bentuk candle per periode waktu. Setiap candle menunjukkan total posisi terbuka baru atau tertutup selama periode tersebut. Candle hijau berarti OI naik karena ada posisi baru yang masuk, sementara candle merah berarti OI turun karena posisi ditutup atau dilikuidasi. Panjang candle menunjukkan seberapa besar perubahan open interest, semakin panjang semakin besar perubahan partisipasi market. OI naik bersamaan dengan harga naik menandakan buyer agresif masuk dengan posisi baru dan tren bullish cenderung berlanjut. OI naik tapi harga turun menandakan seller dominan masuk dengan posisi baru, ini tanda downtrend kuat. OI turun saat harga naik bisa jadi tanda short squeeze, banyak short yang likuidasi dan memicu harga naik, tapi kenaikan ini kurang kuat karena bukan dari buyer baru. OI turun saat harga turun menandakan long close atau posisi long yang keluar, downtrend jenis ini cenderung lemah karena bukan dari seller agresif baru. Kalau harga sideways tapi OI naik terus, ini bisa jadi tanda akumulasi atau distribusi diam-diam oleh smart money. Kombinasi OI Candles dengan CVD Candles makin memperkuat analisa, misalnya OI naik dan CVD hijau berarti buyer dominan dengan posisi baru, sedangkan OI naik tapi CVD merah berarti seller distribusi diam-diam meski harga naik, potensi fake breakout. OI turun dengan CVD hijau bisa jadi short squeeze, dan OI turun dengan CVD merah bisa jadi long close massal yang berpotensi diikuti reversal bullish. OI Candles efektif buat konfirmasi tren, deteksi fake breakout, baca short squeeze, dan mengikuti jejak smart money. Tapi hati-hati karena OI naik nggak selalu bullish dan OI turun nggak selalu bearish, harus dikonfirmasi sama price action dan CVD. Market maker juga bisa pura-pura nambah OI buat jebak trader ritel, jadi wajib hati-hati dan nggak cuma lihat OI aja. OI Candles cocok buat analisa tren, konfirmasi breakout, baca squeeze, dan ngintip akumulasi smart money biar kita nggak kejebak fake move." },
		                    { role: "system", content: "Volume adalah total jumlah kontrak, lot, atau unit aset yang diperdagangkan dalam periode waktu tertentu. Volume ngasih tau seberapa aktif market di waktu itu dan seberapa besar minat partisipasi trader. Volume yang tinggi nunjukin banyak transaksi terjadi, artinya ada minat besar, bisa dari buyer atau seller. Kalau harga naik dan volume tinggi, itu tanda bullish kuat karena banyak buyer masuk dorong harga naik. Kalau harga turun dengan volume tinggi, itu tanda bearish kuat karena seller dominan. Sebaliknya, harga naik atau turun tapi volume rendah, itu tanda pergerakan lemah dan rawan fakeout. Volume juga dipakai buat konfirmasi breakout, kalau harga tembus resistance atau support dengan volume besar, itu breakout valid. Kalau breakout tapi volume kecil, bisa jadi fake breakout. Di tren naik, volume idealnya ikut naik, kalau harga naik tapi volume makin kecil, ada tanda weakness, bisa jadi tren melemah atau bakal reversal. Sebaliknya di downtrend, kalau harga turun dan volume makin kecil, ada potensi downtrend capek dan siap reversal. Volume spike atau lonjakan volume tiba-tiba bisa jadi tanda smart money masuk, entah buat akumulasi atau distribusi, tergantung price action-nya. Volume juga sering digabung sama indikator lain kayak CVD atau Open Interest buat baca kekuatan buyer vs seller lebih akurat." },
		                    { role: "system", content: "RSI (Relative Strength Index) adalah indikator momentum yang ngukur seberapa cepat dan besar perubahan harga dalam periode tertentu, biasanya 14 candle. RSI punya skala dari 0 sampai 100 dan fungsinya buat ngecek apakah market udah overbought (terlalu banyak dibeli) atau oversold (terlalu banyak dijual). Kalau RSI di atas 70, market dianggap overbought, artinya harga udah naik terlalu jauh dan rawan koreksi atau reversal ke bawah. Kalau RSI di bawah 30, market dianggap oversold, artinya harga udah turun terlalu jauh dan berpotensi rebound atau reversal naik. Selain itu, RSI juga bisa dipakai buat cari **divergence**. Kalau harga bikin higher high tapi RSI malah lower high, itu tanda **bearish divergence**, artinya momentum melemah meskipun harga naik â€” bisa jadi sinyal potensi reversal turun. Sebaliknya, kalau harga bikin lower low tapi RSI bikin higher low, itu **bullish divergence**, nunjukin seller mulai kehilangan tenaga meskipun harga turun â€” bisa jadi sinyal potensi reversal naik. RSI juga bisa dikombinasikan sama price action atau indikator lain biar lebih akurat. Misalnya, kalau harga di support dan RSI oversold, itu bisa jadi peluang entry buy. Kalau harga di resistance dan RSI overbought, itu bisa jadi sinyal buat exit atau cari short. Ada juga teknik pakai **RSI midline** (level 50) â€” kalau RSI di atas 50, market cenderung bullish, dan kalau di bawah 50, market cenderung bearish. RSI cocok buat deteksi momentum, konfirmasi tren, dan cari reversal, tapi jangan dipakai sendirian karena bisa kasih false signal kalau market lagi trending kuat." },
		                    { role: "system", content: "Volatility Index adalah indikator buat ngukur seberapa besar market memperkirakan harga bakal bergerak di waktu dekat. VIX nggak nunjukin arah harga naik atau turun, tapi lebih ke seberapa heboh market bakal gerak â€” makin tinggi VIX, makin besar ekspektasi pergerakan harga, makin rendah VIX, makin tenang market. Cara bacanya begini: kalau VIX naik signifikan dan harga juga naik, hati-hati karena bisa jadi rally palsu yang didorong short covering atau panic buy, bukan bullish beneran. Kalau VIX naik dan harga turun, itu tanda klasik market panik atau bearish kuat, trader pada buru-buru keluar. Kalau VIX turun dan harga naik, itu bullish sehat karena market tenang dan optimis. Kalau VIX turun tapi harga turun juga, biasanya itu koreksi sehat, bukan panic sell â€” bisa jadi peluang buy di support. Intinya, VIX bantu ngasih konteks apakah market lagi tenang atau siap volatile, biar kita nggak asal masuk pas market kelihatan â€œnaikâ€ tapi ternyata kena fake rally atau jebakan market maker. Cocok dipakai buat filter kondisi market sebelum entry besar." },
                        { role: "user", content: [
                            { type: "text", text: "**ANALISA GAMBAR CHART INI JANGAN SAMPAI SALAH BACA! JANGAN MENGARANG!** Sebutkan posisi SETIAP INDIKATOR yang ada di gambar dan pastikan hasilnya keluar dalam format berikut: Berikut adalah analisis chart yang ada di gambar: HARGA TERBARU: (sebut angka dari chart) VOLATILITY INDEX (10, 3, WILDER SMOOTHING): (sebut angka dari chart) RSI (14, SMA, 14): (sebut angka dari chart) VOLUME (SMA, 9): (sebut angka dari chart) CoinGlass Aggregated Open Interest (Candles) (Coins, open, No Filter): (sebut angka dari chart) CoinGlass Cumulative Volume Delta (CVD Candles) (0, open, No Filter): (sebut angka dari chart) Berikut adalah analisis dari setiap indikator: VOLATILITY INDEX (10, 3, WILDER SMOOTHING): (jelaskan kondisi volatilitas berdasarkan angka dari gambar, apakah rendah, sedang, atau tinggi) RSI (14, SMA, 14): (jelaskan apakah overbought, oversold, atau netral berdasarkan angka dari gambar) VOLUME (SMA, 9): (jelaskan apakah volume rendah, sedang, atau tinggi berdasarkan angka dari gambar) CoinGlass Aggregated Open Interest (Candles): (jelaskan apakah open interest naik, turun, atau stagnan berdasarkan angka dari gambar) CoinGlass Cumulative Volume Delta (CVD Candles): (jelaskan apakah volume delta positif, negatif, atau netral berdasarkan angka dari gambar) Berikut adalah saran posisi untuk setiap indikator: VOLATILITY INDEX (10, 3, WILDER SMOOTHING): Saran posisi: (LONG/SHORT) RSI (14, SMA, 14): Saran posisi: (LONG/SHORT) VOLUME (SMA, 9): Saran posisi: (LONG/SHORT) CoinGlass Aggregated Open Interest (Candles): Saran posisi: (LONG/SHORT) CoinGlass Cumulative Volume Delta (CVD Candles): Saran posisi: (LONG/SHORT) Berikut adalah kesimpulan posisi yang paling cocok berdasarkan indikator yang ada: STOP LOSS (SL): (sebut angka dari gambar sesuai analisis) TAKE PROFIT (TP): (sebut angka dari gambar sesuai analisis) Saran posisi akhir: (LONG/SHORT berdasarkan mayoritas sinyal indikator) **CATATAN: ANALISA WAJIB SESUAI GAMBAR, TIDAK BOLEH MENGARANG!**" },
                            { type: "image_url", image_url: { url: imageUrl } }
                        ] }
                    ],
                    temperature: 0.7,
                    top_p: 0.7,
                    top_k: 50,
                    repetition_penalty: 1
                };

                const togetherResponse = await fetch(TOGETHER_API_URL, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        Authorization: `Bearer ${selectedApiKey}`
                    },
                    body: JSON.stringify(payload)
                });

                const data = await togetherResponse.json();
                responseField.style.display = 'block';
                responseField.textContent = data.choices[0]?.message?.content || "No response received";
            } catch (error) {
                console.error("Error:", error);
                responseField.textContent = `Error: ${error.message}`;
            }
        }
        
        

        
         let holdTimeout;
        const responseField = document.getElementById('response');

        responseField.addEventListener('mousedown', () => {
            holdTimeout = setTimeout(() => {
                if (confirm('Refresh page?')) location.reload();
            }, 1000);  // Hold 1 detik buat munculin confirm
        });

        responseField.addEventListener('mouseup', () => clearTimeout(holdTimeout));
        responseField.addEventListener('mouseleave', () => clearTimeout(holdTimeout));
    </script>
</body>
</html>
